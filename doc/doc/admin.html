<h1>Customize the Admin class</h1>

<p>Each elixir Entity that is visualized within Camelot has an associated Admin
class which specifies how the entity or a list of entities should be visualized.</p>

<p>Those entities are subclasses of the EntityAdmin class in the module 
camelot/view/elixir_admin.</p>

<p>Usually the Admin class is bound to the Entity class by defining it as an
inner class of the Admin class :</p>

<pre><code>class Movie(Entity):
  title = Field(Unicode(60), required=True)

  class Admin(EntityAdmin):
    name = 'Movies'
    list_display = ['title']
</code></pre>

<p>Most of the behaviour of the Admin class can be customized by changing
the class attributes like name or list_display.</p>

<h2>Validators</h2>

<p>Before an object is written to the database it needs to be validated, and
the user needs to be informed in case the object is not valid.</p>

<p>By default Camelot does some introspection on the model to check the validity
of an object, to make sure it will be able to write the object to the
database.</p>

<p>But this might not be enough.  If more validation is needed, a custom Validator
class can be defined.  The default Validator class is located in 
camelot/view/validator.</p>

<pre><code>class MyValidator(Validator):

  def objectValidity(self, entity_instance):
    messages = super(MyValidator.self).objectValidity(entity_instance)
    if 'Star' not in entity_instance.title:
      messages.append("The movie title should always contain 'Star'.")
    return messages
</code></pre>

<p>Its most important method is objectValidity, which takes an object as argument and
should return a list of strings explaining why the object is invalid.  These
strings will then be presented to the user.</p>

<p>Notice that this method will always get called outside of the GUI thread, so the
call will never block the GUI.</p>

<p>Then tell the Admin interface to pickup the custom Validator :</p>

<pre><code>class Movie(Entity):
  title = Field(Unicode(60), required=True)

  class Admin(EntityAdmin):
    name = 'Movies'
    list_display = ['title']
    validator = MyValidator
</code></pre>
